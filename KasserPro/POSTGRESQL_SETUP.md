# ๐ ุฏููู ุฅุนุฏุงุฏ PostgreSQL ูู KasserPro

## ๐ ูุง ูู PostgreSQLุ

PostgreSQL ูู ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุจูุงูุงุช ุนูุงุฆููุฉ (RDBMS) ููู ูููุชูุญ ุงููุตุฏุฑ. ูุชููุฒ ุจู:
- **ุฃุฏุงุก ุนุงูู** ูุน ุงูุจูุงูุงุช ุงููุจูุฑุฉ
- **ุฏุนู ูุชุนุฏุฏ ุงููุณุชุฎุฏููู** - ุนุฏุฉ ุฃุดุฎุงุต ูุณุชุฎุฏููู ุงููุธุงู ูู ููุณ ุงูููุช
- **ููุซูููุฉ ุนุงููุฉ** - ููุงุณุจ ููุชุทุจููุงุช ุงูุฅูุชุงุฌูุฉ
- **ูุฌุงูู ุชูุงูุงู** ูููุชูุญ ุงููุตุฏุฑ

---

## ๐ ุฎุทูุงุช ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1๏ธโฃ ุชุซุจูุช PostgreSQL ุนูู Windows

#### ุงูุทุฑููุฉ ุงูุฃููู: ุงุณุชุฎุฏุงู ุงููุซุจุช ุงูุฑุณูู (ููุตู ุจู)

1. **ุชุญููู PostgreSQL:**
   - ุงุฐูุจ ุฅูู: https://www.postgresql.org/download/windows/
   - ุฃู ูุจุงุดุฑุฉ: https://www.enterprisedb.com/downloads/postgres-postgresql-downloads
   - ุงุฎุชุฑ ุฃุญุฏุซ ุฅุตุฏุงุฑ (ูุซูุงู PostgreSQL 16)

2. **ุชุดุบูู ุงููุซุจุช:**
   - ุดุบูู ุงูููู `.exe` ุงูุฐู ุชู ุชุญูููู
   - ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:
     - **Port:** ุงุชุฑูู `5432` (ุงูุงูุชุฑุงุถู)
     - **Superuser Password:** ุถุน ูููุฉ ูุฑูุฑ ูููุฉ (ูุซูุงู: `postgres` ููุชุทููุฑ ููุท)
     - **Locale:** ุงุชุฑูู ุงูุงูุชุฑุงุถู

3. **ุชุซุจูุช pgAdmin (ุฃุฏุงุฉ ุฅุฏุงุฑุฉ):**
   - ุฃุซูุงุก ุงูุชุซุจูุชุ ุณููุนุฑุถ ุนููู ุชุซุจูุช **pgAdmin 4**
   - โ **ููุตุญ ุจุชุซุจูุชู** - ุณูุณุงุนุฏู ูู ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงุณุชุฎุฏุงู Docker (ูููุณุชุฎุฏููู ุงููุชูุฏููู)

```bash
docker run --name postgres-kasser -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=kasserpro -p 5432:5432 -d postgres:16
```

---

### 2๏ธโฃ ุงูุชุญูู ูู ุงูุชุซุจูุช

#### ุจุงุณุชุฎุฏุงู Command Prompt ุฃู PowerShell:

```bash
# ุงูุชุญูู ูู ุฃู PostgreSQL ูุนูู
psql --version

# ุฃู
pg_ctl --version
```

#### ุจุงุณุชุฎุฏุงู pgAdmin:
- ุงูุชุญ **pgAdmin 4** ูู ูุงุฆูุฉ Start
- ุณุชุฌุฏ ุฎุงุฏู PostgreSQL ูุญูู ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

---

### 3๏ธโฃ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุทุฑููุฉ ุงูุฃููู: ุจุงุณุชุฎุฏุงู pgAdmin (ุฃุณูู)

1. ุงูุชุญ **pgAdmin 4**
2. ุงููุฑ ุนูู **Servers** โ **PostgreSQL 16** (ุฃู ุงูุฅุตุฏุงุฑ ุงูุฎุงุต ุจู)
3. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุชู ูุถุนุชูุง ุฃุซูุงุก ุงูุชุซุจูุช
4. ุงููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ุนูู **Databases** โ **Create** โ **Database**
5. ุฃุฏุฎู:
   - **Database name:** `kasserpro`
   - **Owner:** `postgres`
6. ุงููุฑ **Save**

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุจุงุณุชุฎุฏุงู Command Line

ุงูุชุญ **Command Prompt** ุฃู **PowerShell** ูุงูุชุจ:

```bash
# ุงูุงุชุตุงู ุจู PostgreSQL
psql -U postgres

# ุจุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑุ ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
CREATE DATABASE kasserpro;

# ููุจูุฆุฉ ุงูุชุทููุฑูุฉ (ุงุฎุชูุงุฑู):
CREATE DATABASE kasserpro_dev;

# ููุฎุฑูุฌ:
\q
```

---

### 4๏ธโฃ ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน

#### โ ุชู ุจุงููุนู! 

ุชู ุชุญุฏูุซ ุงููููุงุช ุงูุชุงููุฉ:
- `appsettings.json` - ูุญุชูู ุนูู connection string ููุฅูุชุงุฌ
- `appsettings.Development.json` - ูุญุชูู ุนูู connection string ููุชุทููุฑ
- `Program.cs` - ุชู ุชุญุฏูุซู ูุงุณุชุฎุฏุงู PostgreSQL

#### ๐ง ุชุนุฏูู ูููุฉ ุงููุฑูุฑ (ุฅู ูุฒู ุงูุฃูุฑ):

ุฅุฐุง ุงุณุชุฎุฏูุช ูููุฉ ูุฑูุฑ ูุฎุชููุฉ ุนู `postgres`ุ ุนุฏูู ูู:
- `appsettings.json` โ `ConnectionStrings` โ `DefaultConnection`
- `appsettings.Development.json` โ `ConnectionStrings` โ `DefaultConnection`

**ุตูุบุฉ Connection String:**
```
Host=localhost;Port=5432;Database=kasserpro;Username=postgres;Password=ูููุฉ_ุงููุฑูุฑ_ุงูุฎุงุตุฉ_ุจู
```

---

### 5๏ธโฃ ุชุดุบูู Migrations

ุจุนุฏ ุชุซุจูุช PostgreSQL ูุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```bash
# ุงูุงูุชูุงู ููุฌูุฏ ุงููุดุฑูุน
cd KasserPro/KasserPro

# ุงุณุชุนุงุฏุฉ ุงูุญุฒู (ูุฅุถุงูุฉ ุญุฒูุฉ PostgreSQL)
dotnet restore

# ุญุฐู Migrations ุงููุฏููุฉ (ุงุฎุชูุงุฑู - ูุฃููุง ูุงูุช ูู SQLite)
# ููููู ุญุฐู ูุฌูุฏ Migrations ูุฅุนุงุฏุฉ ุฅูุดุงุฆู

# ุฅูุดุงุก Migration ุฌุฏูุฏ
dotnet ef migrations add InitialPostgreSQL

# ุชุทุจูู Migration ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
dotnet ef database update
```

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### โ ุฎุทุฃ: "Connection refused" ุฃู "Could not connect"

**ุงูุญู:**
1. ุชุฃูุฏ ุฃู ุฎุฏูุฉ PostgreSQL ุชุนูู:
   - ุงูุชุญ **Services** (Win + R โ `services.msc`)
   - ุงุจุญุซ ุนู **postgresql-x64-16** (ุฃู ุงูุฅุตุฏุงุฑ ุงูุฎุงุต ุจู)
   - ุชุฃูุฏ ุฃููุง **Running**

2. ุชุญูู ูู ุงููููุฐ:
   - ุชุฃูุฏ ุฃู PostgreSQL ูุนูู ุนูู ุงููููุฐ `5432`
   - ููููู ุชุบููุฑู ูู `postgresql.conf` ุฅุฐุง ูุฒู ุงูุฃูุฑ

### โ ุฎุทุฃ: "password authentication failed"

**ุงูุญู:**
- ุชุฃูุฏ ูู ูููุฉ ุงููุฑูุฑ ูู `appsettings.json` ูุทุงุจูุฉ ููููุฉ ูุฑูุฑ ุงููุณุชุฎุฏู `postgres`

### โ ุฎุทุฃ: "database does not exist"

**ุงูุญู:**
- ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุง ูู ููุถุญ ูู ุงูุฎุทูุฉ 3

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- **ูุซุงุฆู PostgreSQL ุงูุฑุณููุฉ:** https://www.postgresql.org/docs/
- **pgAdmin ุฏููู ุงููุณุชุฎุฏู:** https://www.pgadmin.org/docs/
- **Npgsql (ููุชุจุฉ .NET):** https://www.npgsql.org/

---

## โ ุงูุชุญูู ูู ุฃู ูู ุดูุก ูุนูู

ุจุนุฏ ุฅุชูุงู ุงูุฎุทูุงุช:

1. **ุดุบูู ุงููุดุฑูุน:**
   ```bash
   dotnet run
   ```

2. **ุงูุชุญ Swagger:**
   - ุงุฐูุจ ุฅูู: `http://localhost:5299/swagger`

3. **ุงุฎุชุจุฑ API:**
   - ุฌุฑุจ endpoint `/api/products` ููุชุฃูุฏ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

4. **ุชุญูู ูู pgAdmin:**
   - ุงูุชุญ pgAdmin
   - ุณุชุฌุฏ ุงูุฌุฏุงูู (`Products`, `Orders`, `Categories`, ุฅูุฎ) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช `kasserpro`

---

## ๐ ุชูุงูููุง!

ุงูุขู ูุดุฑูุนู ูุณุชุฎุฏู PostgreSQL ุจุฏูุงู ูู SQLite! ๐

---

## ๐ ููุงุญุธุงุช ูููุฉ

- **ููุฅูุชุงุฌ:** ุงุณุชุฎุฏู ูููุฉ ูุฑูุฑ ูููุฉ ูููุณุช `postgres`
- **ูููุณุฎ ุงูุงุญุชูุงุทู:** ุงุณุชุฎุฏู `pg_dump` ููุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ููุฃุฏุงุก:** PostgreSQL ุฃุณุฑุน ุจูุซูุฑ ูู SQLite ูุน ุงูุจูุงูุงุช ุงููุจูุฑุฉ

